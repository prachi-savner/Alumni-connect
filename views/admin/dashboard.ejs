<% layout("/layouts/boilerplate") %>
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title> -->

    <!-- Bootstrap CSS -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"> -->

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* Sidebar Styling */
        /* .sidebar {
            width: 250px;
            height: 100vh;
            background: #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            padding-top: 30px;
        }

        .sidebar a {
            padding: 12px 20px;
            display: block;
            text-decoration: none;
            color: #444;
            border-radius: 5px;
        }

        .sidebar a:hover {
            background: #e6f0ff;
            color: #0d6efd;
        } */

        /* Main */
        .content {
            /* margin-left: 250px; */
            padding: 30px;
        }

        /* Mobile: Sidebar Hidden */
        @media (max-width: 768px) {
            /* .sidebar {
                left: -250px;
                transition: 0.3s;
            } */

            /* .sidebar.active {
                left: 0;
            } */

            .content {
                margin-left: 0;
            }

            
        }

    </style>
</head>

<body class="bg-light">

    <!-- Sidebar -->
    <!-- <div class="sidebar" id="sidebar">
        <h3 class="text-primary text-center mb-4">Admin Panel</h3>

        <a href="/admin/dashboard">Dashboard</a>
        <a href="/admin/users">Manage Users</a>
        <a href="/admin/pending">Pending Users</a>
        <a href="/alumni">Alumni</a>
        <a href="/student">Student</a>
        <a href="/job">Jobs</a>
        <a href="/event">Event</a>
        <a href="/chat">Chat</a>
        <a href="/">Back to Home</a>
    </div> -->

    <!-- Main Content -->
    <div class="content">

        <!-- Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="fw-bold">Admin Dashboard</h2>
            <i id="menu-btn" class="bi bi-list"></i>
            <p><b>Welcome, Admin</b></p>
        </div>

        <!-- Stats Cards -->
        <div class="row g-3">

            <div class="col-md-3 col-6">
                <div class="card shadow-sm p-3">
                    <h6 class="text-muted">Total Users</h6>
                    <h2><%= totalUsers %></h2>
                </div>
            </div>

            <div class="col-md-3 col-6">
                <div class="card shadow-sm p-3">
                    <h6 class="text-muted">Alumni</h6>
                    <h2 class="text-primary"><%= totalAlumni %></h2>
                </div>
            </div>

            <div class="col-md-3 col-6">
                <div class="card shadow-sm p-3">
                    <h6 class="text-muted">Students</h6>
                    <h2 class="text-success"><%= totalStudents %></h2>
                </div>
            </div>

            <div class="col-md-3 col-6">
                <div class="card shadow-sm p-3">
                    <h6 class="text-muted">Admins</h6>
                    <h2 class="text-primary"><%= totalAdmins %></h2>
                </div>
            </div>

        </div>

        <!-- Charts -->
        <div class="row mt-4">

            <!-- Role Distribution -->
            <div class="col-lg-6">
                <div class="card p-3 shadow-sm"  style="width:60%; height: 70%px;">
                    <h5>User Roles Distribution</h5>
                    <canvas id="roleChart" height="100"></canvas>
                </div>
            </div>

        </div>

        <!-- Recent Users Table -->
        <div class="card p-3 shadow-sm mt-4"  style="border-radius: 2rem; padding: 2rem !important;">
            <h5 class="mb-3">Recent Users</h5>

            <div class="table-responsive">
                <table class="table">
                    <thead class="table-light">
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Joined</th>
                        </tr>
                    </thead>

                    <tbody>
                        <% recentUsers.forEach(u => { %>
                        <tr>
                            <td><%= u.name %></td>
                            <td><%= u.email %></td>
                            <td class="text-capitalize"><%= u.role %></td>
                            <td><%= u.createdAt.toLocaleDateString() %></td>
                        </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        </div>

    </div>

    <!-- Sidebar Toggle Script -->
    <script>
        const menuBtn = document.getElementById("menu-btn");
        const sidebar = document.getElementById("sidebar");

        menuBtn?.addEventListener("click", () => {
            sidebar.classList.toggle("active");
        });
    </script>

    <!-- Charts -->
    <script>
        // Role Pie Chart
        new Chart(document.getElementById('roleChart'), {
            type: 'pie',
            data: {
                labels: ["Alumni", "Students", "Admins"],
                datasets: [{
                    data: [<%= totalAlumni %>, <%= totalStudents %>, <%= totalAdmins %>],
                    backgroundColor: ["#36a2eb","#ff6384", "#ff9f40"]
                }]
            }
        });
    </script>

    <!-- Bootstrap JS -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script> -->
<!-- 
</body>
</html> -->
