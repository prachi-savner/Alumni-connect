<% layout('/layouts/boilerplate') %>

<style>
  body {
    background: #EEF5FF;
    font-family: "Poppins", sans-serif;
  }

  .header-box {
    background: rgb(212, 230, 249);
    height: 10rem;
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 3rem;
  }

  .profile-container {
    max-width: 900px;
    margin: 3rem auto;
  }

  .profile-card {
    background: #fff;
    padding: 25px;
    border-radius: 18px;
    box-shadow: rgba(0,0,0,0.05) 0px 4px 12px;
    margin-top: 25px;
  }

  .profile-header {
    display: flex;
    align-items: center;
    gap: 25px;
  }

  .profile-img {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius: 50%;
    border: 4px solid white;
    box-shadow: 0px 0px 6px rgba(0,0,0,0.1);
  }

  .section-card {
    background: #fff;
    border-radius: 18px;
    padding: 25px;
    margin-top: 30px;
    box-shadow: rgba(0,0,0,0.05) 0px 4px 12px;
  }

  .tag {
    background: #dceaff;
    padding: 6px 10px;
    border-radius: 15px;
    display: inline-block;
    margin: 4px;
  }

  .social-link i {
    font-size: 1.2rem;
  }
</style>

<div class="header-box fade-up">
  <h1 style="font-size:2.8rem;">Welcome <%= user.name %></h1>
</div>

<div class="profile-container fade-up">

  <!-- Title Row -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="fw-bold">My Profile</h2>

    <form method="GET" action="/<%= user.role %>/<%= user._id %>/edit">
      <button class="btn btn-primary">
        <i class="fa fa-pen"></i> Edit Profile
      </button>
    </form>
  </div>

  <!-- Profile Card -->
  <div class="profile-card">
    <div class="profile-header">
      <img src="<%= user.profilePic.url %>" class="profile-img">

      <div class="profile-info">
        <h3 class="fw-bold mb-1"><%= user.name %></h3>
        <p><i class="fa fa-envelope"></i> <%= user.email %></p>

        <% if(user.role === "student") { %>
          <p><i class="fa fa-graduation-cap"></i> <%= user.course %> • <%= user.year %></p>
        <% } %>

        <% if(user.role === "alumni") { %>
          <p><i class="fa fa-briefcase"></i> <%= user.company || "N/A" %> • <%= user.position || "N/A" %></p>
          <p><i class="fa fa-clock"></i> Experience: <%= user.experience || "Not added" %> years</p>
        <% } %>
      </div>
    </div>
  </div>

  <!-- About Section -->
  <div class="section-card">
    <h4><i class="fa fa-user"></i> About Me</h4>
    <p class="mt-2"><%= user.bio || "No bio added." %></p>
  </div>

  <!-- Skills Section -->
  <div class="section-card">
    <h4><i class="fa fa-tools"></i> Skills</h4>
    <div class="mt-2">
      <% if(user.skills.length > 0) { %>
        <% user.skills.forEach(skill => { %>
          <span class="tag"><%= skill %></span>
        <% }) %>
      <% } else { %>
        <p class="text-muted">No skills added.</p>
      <% } %>
    </div>
  </div>

  <!-- Social Links -->
  <div class="section-card">
    <h4><i class="fa fa-link"></i> Social Links</h4>
    <div class="mt-3">

      <% if(user.linkedin) { %>
        <p class="social-link">
          <i class="fab fa-linkedin text-primary"></i> 
          <a href="<%= user.linkedin %>" target="_blank">LinkedIn</a>
        </p>
      <% } %>

      <% if(user.github) { %>
        <p class="social-link">
          <i class="fab fa-github"></i> 
          <a href="<%= user.github %>" target="_blank">GitHub</a>
        </p>
      <% } %>

      <% if(!user.linkedin && !user.github) { %>
        <p class="text-muted">No social profiles added.</p>
      <% } %>
    </div>
  </div>
</div>
